# ============================================================
# E-Commerce CQRS Analytics System - Environment Variables
# ============================================================
# Copy this file to .env and update values for your environment

# ============================================================
# DATABASE - Write Model (Primary Database)
# ============================================================
DATABASE_URL=postgresql://user:password@db:5432/write_db
DB_HOST=db
DB_PORT=5432
DB_USER=user
DB_PASSWORD=password
DB_NAME=write_db

# ============================================================
# DATABASE - Read Model (Analytics Database)
# ============================================================
READ_DATABASE_URL=postgresql://user:password@read_db:5432/read_db
READ_DB_HOST=read_db
READ_DB_PORT=5432
READ_DB_USER=user
READ_DB_PASSWORD=password
READ_DB_NAME=read_db

# ============================================================
# MESSAGE BROKER - RabbitMQ Configuration
# ============================================================
BROKER_URL=amqp://guest:guest@broker:5672/
RABBITMQ_HOST=broker
RABBITMQ_PORT=5672
RABBITMQ_USER=guest
RABBITMQ_PASSWORD=guest

# ============================================================
# MESSAGE BROKER - Queue Names
# ============================================================
RABBITMQ_ORDER_QUEUE=order-events
RABBITMQ_PRODUCT_QUEUE=product-events
RABBITMQ_EXCHANGE_NAME=ecommerce.events
RABBITMQ_PREFETCH_COUNT=1

# ============================================================
# COMMAND SERVICE Configuration
# ============================================================
COMMAND_SERVICE_PORT=8080
COMMAND_SERVICE_HOST=0.0.0.0
NODE_ENV=production

# ============================================================
# QUERY SERVICE Configuration
# ============================================================
QUERY_SERVICE_PORT=8081
QUERY_SERVICE_HOST=0.0.0.0

# ============================================================
# CONSUMER SERVICE Configuration
# ============================================================
CONSUMER_SERVICE_POLLING_INTERVAL=2000
CONSUMER_SERVICE_MAX_RETRIES=3
CONSUMER_SERVICE_RETRY_DELAY=1000

# ============================================================
# OUTBOX PUBLISHER Configuration
# ============================================================
OUTBOX_POLLING_INTERVAL=5000
OUTBOX_BATCH_SIZE=10
OUTBOX_MAX_RETRIES=3

# ============================================================
# LOGGING Configuration
# ============================================================
LOG_LEVEL=info
LOG_FORMAT=json

# ============================================================
# MONITORING & HEALTH CHECK
# ============================================================
HEALTH_CHECK_TIMEOUT=5000
HEALTH_CHECK_INTERVAL=30000

# ============================================================
# EVENTUAL CONSISTENCY Configuration
# ============================================================
# Maximum acceptable lag in seconds before considering system unhealthy
MAX_ACCEPTABLE_LAG_SECONDS=30
